# レッスン18　Wifi接続でロボットを動かそう！

## **Wifi接続のアプリを用いてロボットを動かす

## このレッスンで身につける力

- [ ] wifiライブラリを追加できる
- [ ] ジャンパーピンを正しく接続できる
- [ ] STAモードでSSIDとパスワードを使ってWifiに接続できる
- [ ] APモードで直接タブレットと接続できる
- [ ] コースを走破するためにサンプルコードを修正できる

---

## ミッションの準備

## ハードウェアを用意しよう
- [ ] Osoyoo ロボット(Arduino UNO rev.3と完全互換) x 1
- [ ] USBケーブル x 1
- [ ] パソコン x 1
- [ ] 超音波センサ x 1
- [ ] サーボモータ x 1
- [ ] ブザーモジュール x 1
- [ ] 取り付け用ねじなど
---
#### 0.ArduinoIDEを起動しよう

デスクトップにあるAruduinoのアイコンをダブルクリックしてArduinoIDEを起動しましょう．

<img src="image/ArduinoIDE_icon.png" width="10%">

---

#### 1.スケッチを保存しよう

(Arduinoでは，プログラムのことを「スケッチ」といいます．)

ファイル→保存をクリック（Ctrl+SでもOK）して，デスクトップに「lesson_08_1」という名前で保存しましょう．

<img src="image/ArduinoIDE_save.png" width="50%">

---
#### 2.Arduinoとパソコンを接続しよう

Arduino UNOボードとパソコンをUSBケーブルでつなぎましょう．

<img src="image/Arduino_USBcable.png" width="30%">

【注意】USBを抜き差しするときは向きを確認して，ていねいにあつかうこと．

USBを差したら，ArduinoIDEでボードとシリアルポートを指定しましょう．　　

ツール→ボードをクリックして、Arduino/Genuino UNOをクリックしましょう。　　

次にツール→シリアルポートをクリックして，「COM～（Arduino UNO）」となっているものをクリックしましょう．（COM～の数字は毎回変わります．）

<img src="image/ArduinoIDE_port_setting.png" width="100%">

---

## ミッションチャレンジ

### Wifiってなに？
みんなはお家でスマートフォンやタブレットを使って動画を見たり、ゲームをしたりすることはあるかな？その時にインターネットに接続するために必要なのがWifiだよ。Wifiは無線通信と言って、人間には見ることのできない電波を用いてデータのやり取りを行なっているんだよ。このレッスンではWifiに接続されたタブレットのアプリを用いてロボットを操作してみるよ。

### 接続準備をしよう
前のレッスンで使ったロボットを少しだけ改良するよ。

<img src="image/1.png" width="100%">

改良する場所はここ！Arduinoの上についている黒い基板があることを確認しよう。赤色のジャンパーキャップをイラストの円で囲った部分と同じように接続しよう。ジャンパーキャップは赤色の小さな部品のことだよ。

<img src="image/2-1.png" width="100%">

### WifiUDPライブラリをインストールしよう
Lesson8でライブラリをインストールしたことを覚えているかな？ライブラリは難しいプログラムを組まなくても、これを使うことで効率的により簡単に開発ができる優れたものだったね。今回使うWifiの技術も実際に自分でプログラムを組もうとするとより高度で難しい内容になるので、今回はWifiUDPライブラリをArduinoIDEにインストールしてから、ロボットを動かすよ。  
下のリンクを押してライブラリをダウンロードしよう。
↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓  
[WiFiEsp Library](https://osoyoo.com/driver/WiFiEsp-master.zip)　　

ダウンロードが終わったらArduino IDEを開いて、スケッチ→ライブラリをインクルード→ZIP形式のライブラリをインストールを押そう。

<img src="image/library1.png" width="70%"> 

インストールボタンを押したら、さっきダウンロードしたWiFiEspライブラリのzipファイルを探して、開くボタンを押すとライブラリをインストールすることができるよ。　　

<img src="image/library2.png" width="70%"> 

### Wifiで操作するアプリをタブレットにインストールしよう
今回のレッスンではタブレットのアプリを使ってロボットを操縦するよ。今回はOSOYOO WIFI UDP Robot Car control APP1を使ってロボットを動かすよ。みんなが使ってるタブレットのアプリストアからアプリをインストールしよう。

<img src="image/app.png" width="70%"> 

### サンプルプログラムを動かそう
次のリンクからスケッチをダウンロードしてプログラムを動かしてみよう。
↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓  
[WiFiEsp Library](https://osoyoo.com/driver/WiFiEsp-master.zip)　　


### 出来たことをチェックしよう
- [ ] wifiライブラリを追加できる
- [ ] ジャンパーピンを正しく接続できる
- [ ] STAモードでSSIDとパスワードを使ってWifiに接続できる
- [ ] APモードで直接タブレットと接続できる
- [ ] コースを走破するためにサンプルコードを修正できる